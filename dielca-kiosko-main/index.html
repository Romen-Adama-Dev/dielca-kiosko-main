<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="Dielca Kiosco - Terminal de pedidos tÃ¡ctil">
    <title>Dielca Kiosco</title>
    <style>
        body {
            -webkit-user-select: none;
            user-select: none;
        }
    </style>
    <link rel="stylesheet" href="styles/main.css">
</head>

<body>

    <div id="app">
        <section class="screen" id="screen-splash">
            <div class="splash-content">
                <div class="splash-logo">
                    <div class="splash-logo-text">DIELCA</div>
                    <div class="splash-logo-sub">Distribuidor ElÃ©ctrico de Canarias</div>
                </div>
                <div class="splash-title">
                    Bienvenido al<br><span>Terminal de Pedidos</span>
                </div>
                <button class="splash-touch-btn" id="splash-start">
                    <svg viewBox="0 0 24 24" width="32" height="32" fill="none">
                        <path d="M9 12l2 2 4-4M21 12c0 4.97-4.03 9-9 9s-9-4.03-9-9 4.03-9 9-9 9 4.03 9 9z"
                            stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                    Toca para empezar
                </button>
                <p style="color:rgba(255,255,255,0.35); font-size:16px;">
                    Pantalla tÃ¡ctil Â· Sin necesidad de teclado
                </p>
            </div>
        </section>

        <!-- ================================================
       SCREEN 2: CATEGORÃAS
       ================================================ -->
        <section class="screen" id="screen-categorias">
            <header class="kiosk-header">
                <div class="header-logo-mini">DIELCA</div>
                <h1 class="header-title">Â¿QuÃ© necesitas hoy?</h1>
            </header>
            <div class="categorias-body">
                <div id="categorias-grid">
                    <!-- Renderizado por JS -->
                </div>
            </div>
        </section>

        <!-- ================================================
       SCREEN 3: PRODUCTOS
       ================================================ -->
        <section class="screen" id="screen-productos">
            <header class="kiosk-header">
                <button class="header-back-btn" id="productos-back">
                    <svg viewBox="0 0 24 24" width="22" height="22" fill="none">
                        <path d="M19 12H5M11 6l-6 6 6 6" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"
                            stroke-linejoin="round" />
                    </svg>
                    Volver
                </button>
                <div class="header-logo-mini">DIELCA</div>
                <h2 class="header-title" id="productos-titulo">CategorÃ­a</h2>
            </header>
            <div class="productos-body">
                <div id="productos-grid">
                    <!-- Renderizado por JS -->
                </div>
            </div>
        </section>

        <!-- ================================================
       SCREEN 4: RESUMEN DEL PEDIDO
       ================================================ -->
        <section class="screen" id="screen-resumen">
            <header class="kiosk-header">
                <button class="header-back-btn" id="resumen-back">
                    <svg viewBox="0 0 24 24" width="22" height="22" fill="none">
                        <path d="M19 12H5M11 6l-6 6 6 6" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"
                            stroke-linejoin="round" />
                    </svg>
                    Modificar
                </button>
                <div class="header-logo-mini">DIELCA</div>
                <h2 class="header-title">Resumen del pedido</h2>
            </header>

            <!-- Tabla de cabecera -->
            <div
                style="padding: 0 40px; display: grid; grid-template-columns: 1fr 200px 150px 140px; gap: 16px; padding-top: 16px; padding-bottom: 8px;">
                <span
                    style="font-size:13px; font-weight:700; color:#8a93a8; text-transform:uppercase; letter-spacing:1px;">Producto</span>
                <span
                    style="font-size:13px; font-weight:700; color:#8a93a8; text-transform:uppercase; letter-spacing:1px;">Referencia</span>
                <span
                    style="font-size:13px; font-weight:700; color:#8a93a8; text-transform:uppercase; letter-spacing:1px; text-align:center;">Cantidad</span>
                <span
                    style="font-size:13px; font-weight:700; color:#8a93a8; text-transform:uppercase; letter-spacing:1px; text-align:right;">Precio</span>
            </div>

            <div class="resumen-body" id="resumen-list">
                <!-- Renderizado por JS -->
            </div>

            <div style="padding: 0 40px 16px; flex-shrink: 0;">
                <div class="resumen-total-row">
                    <span class="resumen-total-label">Total estimado</span>
                    <span id="resumen-total">0,00 â‚¬</span>
                </div>
                <p style="font-size:13px; color:#8a93a8; margin-top:8px; padding: 0 4px;">
                    * Los precios son orientativos y pueden variar. Un comercial confirmarÃ¡ el pedido final.
                </p>
            </div>

            <div class="resumen-actions">
                <button class="btn-secundario" id="resumen-cancelar">
                    ðŸ—‘ Cancelar pedido
                </button>
                <button class="btn-primario" id="resumen-confirmar">
                    <svg viewBox="0 0 24 24" width="26" height="26" fill="none">
                        <path d="M9 12l2 2 4-4M21 12c0 4.97-4.03 9-9 9s-9-4.03-9-9 4.03-9 9-9 9 4.03 9 9z"
                            stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                    Confirmar pedido
                </button>
            </div>
        </section>

        <!-- ================================================
       SCREEN 5: CONFIRMACIÃ“N
       ================================================ -->
        <section class="screen" id="screen-confirmacion">
            <div class="confirm-content">
                <div class="confirm-icon">
                    <svg viewBox="0 0 80 80" fill="none">
                        <circle cx="40" cy="40" r="38" stroke="#4ade80" stroke-width="3" />
                        <path d="M24 40l12 12 20-24" stroke="#4ade80" stroke-width="5" stroke-linecap="round"
                            stroke-linejoin="round" />
                    </svg>
                </div>
                <div class="confirm-titulo">Â¡Pedido enviado!</div>
                <div class="confirm-sub">Nuestro equipo recibirÃ¡ tu solicitud y se pondrÃ¡ en contacto contigo.</div>
                <div class="confirm-pedido">
                    <div class="confirm-pedido-label">NÃºmero de referencia</div>
                    <div id="confirm-numero">DK-000000</div>
                </div>
                <button id="confirm-nuevo">
                    Hacer otro pedido
                </button>
                <div class="confirm-auto">La pantalla volverÃ¡ al inicio automÃ¡ticamente en 15 segundos</div>
            </div>
        </section>

    </div><!-- /#app -->

    <!-- ================================================
     MODAL DE CANTIDAD
     ================================================ -->
    <div id="qty-modal">
        <div class="qty-modal-box">
            <div class="qty-modal-header">
                <div class="qty-modal-names">
                    <div class="qty-modal-nombre" id="modal-prod-nombre">Producto</div>
                    <div class="qty-modal-precio" id="modal-prod-precio">0.00 â‚¬/ud</div>
                </div>
                <button id="modal-close">âœ•</button>
            </div>

            <div>
                <div class="modal-presets-label">Cantidad rÃ¡pida</div>
                <div id="modal-presets">
                    <!-- Renderizado por JS -->
                </div>
            </div>

            <div>
                <div class="modal-presets-label" style="margin-bottom:12px;">Ajuste fino</div>
                <div class="qty-controls">
                    <button class="qty-ctrl-btn" id="modal-minus">âˆ’</button>
                    <div id="modal-qty">1 ud</div>
                    <button class="qty-ctrl-btn" id="modal-plus">+</button>
                </div>
            </div>

            <div class="qty-modal-total">
                <span class="qty-modal-total-label">Total lÃ­nea</span>
                <span id="modal-total">0,00 â‚¬</span>
            </div>

            <button id="modal-confirm">
                <svg viewBox="0 0 24 24" width="26" height="26" fill="none">
                    <path
                        d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-10 2a2 2 0 100 4 2 2 0 000-4z"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
                AÃ±adir al pedido
            </button>
        </div>
    </div>

    <!-- ================================================
     PANEL DEL CARRITO
     ================================================ -->
    <div id="cart-overlay"></div>
    <aside id="cart-panel">
        <div class="cart-panel-header">
            <svg viewBox="0 0 24 24" width="28" height="28" fill="none">
                <path
                    d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-10 2a2 2 0 100 4 2 2 0 000-4z"
                    stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            </svg>
            <span class="cart-panel-title">Mi pedido</span>
            <button id="cart-close-btn">âœ•</button>
        </div>
        <div id="cart-items-list">
            <!-- Renderizado por JS -->
        </div>
        <div class="cart-panel-footer">
            <div class="cart-total-row">
                <span class="cart-total-label">Total estimado</span>
                <span id="cart-total">0,00 â‚¬</span>
            </div>
            <button id="cart-checkout-btn">
                <svg viewBox="0 0 24 24" width="24" height="24" fill="none">
                    <path
                        d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
                Ver resumen del pedido
            </button>
        </div>
    </aside>

    <!-- BotÃ³n flotante del carrito (visible en todas las pantallas de pedido) -->
    <button class="cart-fab" aria-label="Ver carrito" style="display:none" id="cart-fab-btn">
        <svg viewBox="0 0 24 24" width="36" height="36" fill="none">
            <path
                d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-10 2a2 2 0 100 4 2 2 0 000-4z"
                stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
        <span class="cart-badge" style="display:none">0</span>
    </button>

    <!-- Feedback visual al aÃ±adir producto -->
    <div id="add-feedback">
        <svg viewBox="0 0 24 24" width="28" height="28" fill="none">
            <path d="M9 12l2 2 4-4M21 12c0 4.97-4.03 9-9 9s-9-4.03-9-9 4.03-9 9-9 9 4.03 9 9z" stroke="#4ade80"
                stroke-width="2.5" stroke-linecap="round" />
        </svg>
        Â¡AÃ±adido al pedido!
    </div>

    <script src="js/data.js"></script>
    <script src="js/cart.js"></script>
    <script src="js/app.js"></script>

    <script>
        // Kiosk mode: prevent context menu, keyboard shortcuts
        document.addEventListener('contextmenu', e => e.preventDefault());
        document.addEventListener('keydown', e => {
            if (['F5', 'F11', 'F12'].includes(e.key) || (e.ctrlKey && ['r', 'R', 'u', 'U', 'p', 'P', 's', 'S'].includes(e.key))) {
                e.preventDefault();
            }
        });

        // Show/hide cart FAB when switching screens
        const observer = new MutationObserver(() => {
            const fab = document.getElementById('cart-fab-btn');
            const active = document.querySelector('.screen.active');
            if (!active) return;
            const hide = ['screen-splash', 'screen-confirmacion'].includes(active.id);
            fab.style.display = hide ? 'none' : 'flex';
        });
        observer.observe(document.getElementById('app'), { subtree: true, attributes: true, attributeFilter: ['class'] });
    </script>

</body>

</html>